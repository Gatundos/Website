<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Board Game BETA</title>
  <style>
    :root {
      --sidebar-width: 260px;
      --bg: #0f1115;
      --panel: #161a22;
      --text: #e5e7eb;
      --muted: #94a3b8;
      --accent: #6ee7b7;
      --link-hover: #a7f3d0;
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Arial, sans-serif;
      color: var(--text);
      background: var(--bg);
      display: grid;
      grid-template-columns: var(--sidebar-width) 1fr;
      grid-template-rows: auto 1fr;
      grid-template-areas:
        "sidebar header"
        "sidebar main";
      min-height: 100vh;
    }

    /* Barra lateral fixa */
    aside {
      grid-area: sidebar;
      position: sticky;
      top: 0;
      align-self: start;
      height: 100dvh;
      padding: 20px 16px;
      background: var(--panel);
      border-right: 1px solid #222634;
      overflow: auto;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 16px;
      font-weight: 700;
      letter-spacing: .4px;
    }
    .brand .dot {
      width: 10px; height: 10px;
      border-radius: 50%;
      background: var(--accent);
      box-shadow: 0 0 14px var(--accent);
    }
    nav ul {
      list-style: none;
      margin: 12px 0 0 0;
      padding: 0;
    }
    nav li { margin: 6px 0; }
    nav a {
      display: block;
      padding: 10px 12px;
      color: var(--text);
      text-decoration: none;
      border-radius: 8px;
      transition: background .2s, color .2s;
    }
    nav a:hover { background: #1f2533; color: var(--link-hover); }
    nav a.active { background: #1b2130; outline: 1px solid #273049; }

    /* Cabeçalho com imagem centralizada */
    header {
      grid-area: header;
      background: linear-gradient(180deg, #0f1115 0%, #0f1115cc 100%);
      border-bottom: 1px solid #222634;
      padding: 16px 20px 12px;
    }
    .top-image-wrap {
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .top-image {
      max-width: min(820px, 92%);
      width: 100%;
      height: auto;
      display: block;
      border-radius: 12px;
      outline: 1px solid #222634;
    }

    /* Área principal que recebe subpáginas */
    main {
      grid-area: main;
      padding: 20px;
      overflow: auto;
    }
    .panel {
      background: var(--panel);
      border: 1px solid #222634;
      border-radius: 12px;
      padding: 18px;
      min-height: 40dvh;
    }

    /* Responsivo: sidebar vira topo em telas pequenas */
    @media (max-width: 820px) {
      body {
        grid-template-columns: 1fr;
        grid-template-areas:
          "header"
          "sidebar"
          "main";
      }
      aside {
        position: relative;
        height: auto;
        border-right: none;
        border-bottom: 1px solid #222634;
      }
      nav a { padding: 12px 14px; }
    }
  </style>
</head>
<body>
  <aside>
    <div class="brand">
      <span class="dot"></span>
      <span>Gatundos • Menu</span>
    </div>
    <nav>
      <ul>
        <li><a href="../Personagens/Personagem.html" data-page>Clãs</a></li>
        <li><a href="../Personagens/Fubá.html" data-page>Personagens</a></li>
        <li><a href="paginas/cartas.html" data-page>Cartas</a></li>
        <li><a href="paginas/arvore.html" data-page>Árvore de Habilidades</a></li>
        <li><a href="paginas/hospital.html" data-page>Hospital</a></li>
        <li><a href="paginas/mercado.html" data-page>Mercado</a></li>
        <li><a href="paginas/config.html" data-page>Configurações</a></li>
      </ul>
    </nav>
  </aside>

  <header>
    <div class="top-image-wrap">
      <!-- Troque o src pela sua imagem -->
      <img class="top-image" src="assets/topo.jpg" alt="Imagem topo centralizada" />
    </div>
  </header>

  <main>
    <div id="conteudo" class="panel">
      Selecione uma opção no menu lateral para carregar a subpágina. [Conteúdo dinâmico] [web:3]
    </div>
  </main>

  <script>
    // Utilitários
    const conteudo = document.getElementById('conteudo');
    const links = Array.from(document.querySelectorAll('a[data-page]'));

    function setActive(href) {
      links.forEach(a => a.classList.toggle('active', a.getAttribute('href') === href));
    }

    // Carrega HTML externo no container e executa scripts embutidos, se houver
    async function loadPage(url) {
      try {
        const resp = await fetch(url, { credentials: 'same-origin' });
        if (!resp.ok) throw new Error('Erro ao carregar: ' + resp.status);
        const html = await resp.text();
        conteudo.innerHTML = html;

        // Executa scripts das subpáginas em ordem
        const scripts = conteudo.querySelectorAll('script');
        for (const oldScript of scripts) {
          const s = document.createElement('script');
          if (oldScript.src) {
            s.src = oldScript.src;
            s.async = false;
          } else {
            s.textContent = oldScript.textContent;
          }
          document.head.appendChild(s);
          s.remove();
        }
      } catch (e) {
        conteudo.innerHTML = '<p style="color:#fca5a5">Falha ao carregar a página.</p>';
        console.error(e);
      }
    }

    // Navegação com histórico (SPA leve)
    function navigate(href, push = true) {
      loadPage(href);
      setActive(href);
      if (push) history.pushState({ href }, '', '#' + href);
    }

    // Clique no menu
    links.forEach(a => {
      a.addEventListener('click', ev => {
        ev.preventDefault();
        navigate(a.getAttribute('href'), true);
      });
    });

    // Suporta voltar/avançar do navegador
    window.addEventListener('popstate', ev => {
      const href = (ev.state && ev.state.href) || (location.hash ? location.hash.slice(1) : links[0].getAttribute('href'));
      navigate(href, false);
    });

    // Inicialização: abre hash ou primeira página
    (function init() {
      const initial = location.hash ? location.hash.slice(1) : links[0].getAttribute('href');
      navigate(initial, false);
    })();
  </script>
</body>
</html>

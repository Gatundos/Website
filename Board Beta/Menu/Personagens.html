<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Personagens</title>
  <style>
    /* Tabela básica (pode usar o estilo que já tem) */
    table { width: 100%; border-collapse: collapse; }
    th, td { padding: 10px 12px; border-bottom: 1px solid #e5e7eb; text-align: left; }
    th { background: #f3f4f6; }
    .btn {
      display: inline-block; padding: 8px 12px; border-radius: 8px;
      background: #2563eb; color: #fff; text-decoration: none; font-weight: 600;
    }
    .btn:hover, .btn:focus { background: #1e40af; }

    /* Dialog fullscreen */
    dialog.modal {
      width: 90vw; height: 90vh; max-width: none; max-height: none;
      padding: 0; border: 0; margin: 0;
      background: #0b1020; color: #e7ecff;
    }
    dialog::backdrop { background: rgba(0,0,0,.55); }
    .modal__header {
      height: 56px; display: flex; align-items: center; justify-content: space-between;
      padding: 0 12px; background: rgba(255,255,255,.06);
      border-bottom: 1px solid rgba(255,255,255,.12);
    }
    .modal__title { font-size: 16px; margin: 0; }
    .modal__close {
      appearance: none; border: 0; background: transparent; color: #e7ecff;
      font-size: 16px; border-radius: 8px; padding: 8px 10px; cursor: pointer;
    }
    .modal__close:hover, .modal__close:focus { background: rgba(255,255,255,.12); }
    .modal__body { height: calc(100vh - 56px); }
    .modal__frame {
      width: 100%; height: 100%; border: 0; background: #0b1020;
    }
  </style>
</head>
<body>
  <h1>Lista de Personagens</h1>

  <table>
    <thead>
      <tr>
        <th scope="col">Nome</th>
        <th scope="col">Título</th>
        <th scope="col">Clã</th>
        <th scope="col">Selecionar Personagem</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Fubá/td>
        <td>Arqueira</td>
        <td>Felinos</td>
        <td>
          <a href="/Board Beta/Personagens/Fubá.html" class="btn open-modal" data-url="/Board Beta/Personagens/Fubá.html">
            Selecionar
          </a>
        </td>
      </tr>
      <tr>
        <td>Rato Cinzento</td>
        <td>Ladino</td>
        <td>Ratos</td>
        <td>
          <a href="personagem.html?id=2" class="btn open-modal" data-url="personagem.html?id=2">
            Selecionar
          </a>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- Modal fullscreen com dialog -->
  <dialog class="modal" id="personagemModal" aria-label="Detalhes do personagem">
    <div class="modal__header">
      <h2 class="modal__title">Detalhes do personagem</h2>
      <button type="button" class="modal__close" id="closeModal" aria-label="Fechar">✕ Fechar</button>
    </div>
    <div class="modal__body">
      <!-- Carrega a página de detalhes aqui -->
      <iframe  allow="fullscreen" class="modal__frame" id="modalFrame" title="Conteúdo do personagem"></iframe>
    </div>
  </dialog>

  <script>
    const modal = document.getElementById('personagemModal');
    const frame = document.getElementById('modalFrame');
    const closeBtn = document.getElementById('closeModal');

    // Intercepta cliques nos botões "Selecionar"
    document.addEventListener('click', (e) => {
      const link = e.target.closest('.open-modal');
      if (!link) return;
      e.preventDefault();
      const url = link.dataset.url || link.getAttribute('href');
      frame.src = url;               // carrega a página no iframe
      modal.showModal();             // abre modal como modal bloqueante
    });

    // Botão de fechar
    closeBtn.addEventListener('click', () => {
      frame.src = 'about:blank';     // opcional: limpar para parar carregamentos
      modal.close();
    });

    // Fechar ao clicar fora da área interna (clique no backdrop)
    modal.addEventListener('click', (e) => {
      const rect = modal.getBoundingClientRect();
      const inDialog = (
        e.clientY >= rect.top && e.clientY <= rect.bottom &&
        e.clientX >= rect.left && e.clientX <= rect.right
      );
      if (!inDialog) {
        frame.src = 'about:blank';
        modal.close();
      }
    });

    // Também fecha com Esc automaticamente (comportamento do dialog)
    // Se precisar capturar o evento de fechamento:
    modal.addEventListener('close', () => {
      frame.src = 'about:blank';
    });
  </script>
</body>
</html>
